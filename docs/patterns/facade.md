# Паттерн Facade

**Facade (Фасад)** — это структурный паттерн проектирования, который предоставляет простой интерфейс для взаимодействия со сложной системой. Он скрывает сложность системы, предоставляя клиенту доступ к основным функциям через единый объект.

#### **Основная концепция**

Суть паттерна заключается в том, что:
- Создается класс, который предоставляет упрощенный интерфейс для взаимодействия с множеством подсистем.
- Клиентский код работает только с этим "фасадом", не зная о внутренней сложности системы.
- Фасад делегирует запросы соответствующим компонентам системы.

#### **Преимущества использования**

1. **Упрощение работы с системой**
   - Сокрытие сложности за простым API.
   - Уменьшение количества зависимостей между клиентским кодом и подсистемами.

2. **Гибкость архитектуры**
   - Возможность изменения внутренней реализации без влияния на клиентский код.
   - Легкость добавления новых подсистем или модификации существующих.

3. **Разделение ответственности**
   - Клиентский код не должен разбираться в деталях работы подсистем.
   - Подсистемы остаются независимыми и могут быть переиспользованы.

4. **Улучшение читаемости кода**
   - Клиентский код становится более понятным и лаконичным.

#### **Ключевые компоненты**

1. **Фасад (Facade)**
   - Предоставляет простой интерфейс для взаимодействия с подсистемами.
   - Знание о всех подсистемах и их методах.

2. **Подсистемы (Subsystem Classes)**
   - Набор классов, реализующих конкретные функциональности.
   - Не знают о существовании фасада и работают независимо.

3. **Клиент (Client)**
   - Использует фасад для взаимодействия с системой.
   - Не имеет прямого доступа к подсистемам.

---

### Пример: Управление домашним кинотеатром

Предположим, у нас есть сложная система управления домашним кинотеатром, которая включает в себя несколько подсистем: аудиосистему, проектор, DVD-плеер, освещение и т.д. Без фасада клиенту пришлось бы взаимодействовать с каждой из этих подсистем напрямую, что усложняет код.

#### **Без фасада**

```python
class AudioSystem:
    def turn_on(self):
        print("Включение аудиосистемы")

    def set_volume(self, level):
        print(f"Установка громкости на {level}")

class Projector:
    def turn_on(self):
        print("Включение проектора")

    def set_input_source(self, source):
        print(f"Выбор источника входа: {source}")

class DvdPlayer:
    def turn_on(self):
        print("Включение DVD-плеера")

    def play_movie(self, movie_name):
        print(f"Воспроизведение фильма: {movie_name}")

# Клиентский код без фасада
audio = AudioSystem()
projector = Projector()
dvd = DvdPlayer()

audio.turn_on()
audio.set_volume(15)
projector.turn_on()
projector.set_input_source("DVD")
dvd.turn_on()
dvd.play_movie("Inception")
```

Этот код сложно читать и поддерживать, особенно если система будет расширяться.

---

#### **С фасадом**

```python
class HomeTheaterFacade:
    def __init__(self):
        self.audio_system = AudioSystem()
        self.projector = Projector()
        self.dvd_player = DvdPlayer()

    def watch_movie(self, movie_name):
        """Метод для просмотра фильма."""
        print("Начинаем просмотр фильма...")
        self.audio_system.turn_on()
        self.audio_system.set_volume(15)
        self.projector.turn_on()
        self.projector.set_input_source("DVD")
        self.dvd_player.turn_on()
        self.dvd_player.play_movie(movie_name)

    def end_movie(self):
        """Метод для завершения просмотра фильма."""
        print("Завершаем просмотр фильма...")
        self.dvd_player.turn_off()
        self.projector.turn_off()
        self.audio_system.turn_off()

# Клиентский код с фасадом
home_theater = HomeTheaterFacade()
home_theater.watch_movie("Inception")
home_theater.end_movie()
```

---

### Когда использовать

1. **Сложные системы**
   - Когда система состоит из множества подсистем, которые трудно использовать напрямую.
   - Например, работа с API, библиотеками или аппаратными устройствами.

2. **Упрощение взаимодействия**
   - Когда нужно предоставить клиенту простой интерфейс для выполнения типовых операций.

3. **Интеграция старых и новых систем**
   - Когда требуется адаптировать старые системы под новые требования.

4. **Снижение зависимости**
   - Когда важно минимизировать зависимость клиента от внутренних компонентов системы.

---

### Лучшие практики

1. **Не перегружайте фасад**
   - Фасад должен предоставлять только самые важные и часто используемые методы.
   - Для специфических задач клиент может обращаться напрямую к подсистемам.

2. **Оставьте возможность прямого доступа**
   - Не ограничивайте доступ к подсистемам полностью. Иногда клиенту может потребоваться больше контроля.

3. **Используйте фасады для многоуровневых систем**
   - В крупных проектах можно создавать несколько фасадов для разных уровней системы.

---

### Альтернативы и дополнения

1. **Adapter Pattern**
   - Если нужно адаптировать интерфейс существующего класса под ожидания клиента.

2. **Mediator Pattern**
   - Если требуется более сложное управление взаимодействием между компонентами.

3. **Command Pattern**
   - Если нужно инкапсулировать действия в команды и управлять ими через фасад.

---

## Пример из жизни: Заказ еды в ресторане

Представьте, что вы пришли в ресторан. В ресторане есть несколько отделов, которые работают независимо друг от друга:

Кухня — готовит блюда.
Бар — готовит напитки.
Официант — принимает заказы и координирует работу кухни и бара.
Если бы вы взаимодействовали с каждым отделом напрямую, это выглядело бы так:

Вы подходите к кухне и говорите: "Пожалуйста, приготовьте пиццу".
Затем идете к бару и говорите: "Пожалуйста, принесите стакан воды".
После этого вам нужно самостоятельно координировать, когда блюдо будет готово, и забирать его.
Это сложный и неудобный процесс. Чтобы упростить взаимодействие, в ресторане есть официант , который выступает в роли фасада . Вы просто говорите официанту: "Я хочу пиццу и воду", а он сам координирует работу кухни и бара

---

### Вывод

**Facade** — это мощный паттерн, который помогает упростить работу с сложными системами. Он предоставляет удобный интерфейс для выполнения типовых операций, скрывая детали реализации. Этот подход делает код более чистым, поддерживаемым и масштабируемым, позволяя сосредоточиться на бизнес-логике, а не на технических деталях.