# Паттерн Adapter (Адаптер)

**Adapter (Адаптер)** — это структурный паттерн проектирования, который позволяет объектам с несовместимыми интерфейсами работать вместе. Адаптер выступает в роли посредника, преобразующего интерфейс одного класса в интерфейс, ожидаемый клиентом.

---

## Основная идея

Суть паттерна заключается в следующем:
- У вас есть класс, который хочет использовать другой класс, но их интерфейсы несовместимы.
- Вместо изменения существующего кода, вы создаёте адаптер — класс, который "переводит" вызовы одного интерфейса в вызовы другого.

---

## Зачем нужен Adapter

1. **Интеграция старых и новых систем**
   - Когда нужно подключить устаревший код к новой системе без его изменения.

2. **Использование сторонних библиотек**
   - Когда интерфейс библиотеки не совпадает с ожиданиями вашего кода.

3. **Унификация интерфейсов**
   - Когда несколько классов должны работать через общий интерфейс, но изначально имеют разные.

---

## Ключевые компоненты

1. **Target (Целевой интерфейс)**
   - Интерфейс, который ожидает клиент.

2. **Adaptee (Адаптируемый класс)**
   - Класс с несовместимым интерфейсом, который нужно адаптировать.

3. **Adapter (Адаптер)**
   - Класс, который реализует целевой интерфейс и перенаправляет вызовы к адаптируемому классу.

---

## Виды адаптеров

### 1. Классовый адаптер
- Наследует и Target, и Adaptee.
- Используется, когда можно наследовать оба класса (например, на языках с множественным наследованием).

### 2. Объектный адаптер
- Содержит ссылку на Adaptee.
- Более гибкий и распространённый подход.

---

## Пример: Адаптация несовместимых интерфейсов

**Ситуация:**
У вас есть класс `LegacyPrinter`, который умеет печатать только в формате `print_text(text)`, а ваш новый код ожидает интерфейс `print(message)`. Нужно сделать адаптер, чтобы старый принтер работал с новым кодом.

```python
# Целевой интерфейс (тот, который ожидает клиент)
class Printer:
    def print(self, message: str) -> None:
        pass

# Адаптируемый класс (устаревший, с другим интерфейсом)
class LegacyPrinter:
    def print_text(self, text: str) -> None:
        print(f"Legacy Printer: {text}")

# Адаптер
class PrinterAdapter(Printer):
    def __init__(self, legacy_printer: LegacyPrinter):
        self.legacy_printer = legacy_printer

    def print(self, message: str) -> None:
        self.legacy_printer.print_text(message)

# Клиентский код
def client_code(printer: Printer) -> None:
    printer.print("Hello, Adapter!")

# Использование
legacy_printer = LegacyPrinter()
adapter = PrinterAdapter(legacy_printer)
client_code(adapter)
```

**Вывод:**
```
Legacy Printer: Hello, Adapter!
```

---

## Когда использовать Adapter

- Когда нужно использовать существующий класс, но его интерфейс не совпадает с остальным кодом.
- Когда хотите повторно использовать несколько классов, но их интерфейсы несовместимы.
- Когда нужно интегрировать сторонние библиотеки или сервисы с вашим кодом.

---

## Преимущества

- **Гибкость**
  Позволяет интегрировать несовместимые классы без изменения их кода.

- **Повторное использование**
  Можно использовать существующие классы в новых контекстах.

- **Соблюдение принципа единственной ответственности**
  Адаптер отвечает только за преобразование интерфейсов.

---

## Недостатки

- **Усложнение кода**
  Введение дополнительных классов может увеличить сложность системы.

- **Не всегда очевидно**
  Клиенту может быть неясно, что он работает через адаптер.

---

## Альтернативы

- **Рефакторинг интерфейсов**
  Если есть возможность изменить интерфейс Adaptee, иногда проще привести его к Target.

- **Фасад (Facade)**
  Если нужно упростить работу со сложной системой, а не адаптировать отдельные классы.

---

## Пример из жизни

**Ситуация:**
У вас есть современный USB-накопитель, а у старого компьютера только разъём для карт памяти. Чтобы подключить накопитель, вам нужен **переходник** (адаптер), который с одной стороны подключается к USB, а с другой — к разъёму для карт памяти.

---

## Вывод

**Adapter** — это простой, но мощный паттерн, который помогает интегрировать несовместимые части системы. Он особенно полезен при работе с устаревшим кодом, сторонними библиотеками или при необходимости унифицировать интерфейсы разных классов. Адаптер позволяет избежать изменения существующего кода, сохраняя его работоспособность в новых условиях.