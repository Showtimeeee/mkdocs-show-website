# Гайд по Статус-Кодам HTTP: Основы и Практическое Применение

---

![Мой аватар](../images/error_404.jpg)

<table>
    <tr>
        <th>Статус-код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>100</strong></td>
        <td>Продолжайте (Continue) — сервер получил начальную часть запроса и ожидает остальные данные.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>101</strong></td>
        <td>Переключение протоколов (Switching Protocols) — сервер переключается на протокол, указанный в заголовке Upgrade.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>200</strong></td>
        <td>ОК (OK) — запрос успешно выполнен.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>201</strong></td>
        <td>Создано (Created) — запрос успешно выполнен, и создан новый ресурс.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>202</strong></td>
        <td>Принято (Accepted) — запрос принят, но обработка еще не завершена.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>204</strong></td>
        <td>Нет содержимого (No Content) — запрос успешно выполнен, но ответ не содержит данных.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>301</strong></td>
        <td>Перемещено навсегда (Moved Permanently) — ресурс был перемещен на новый URL.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>302</strong></td>
        <td>Найдено (Found) — ресурс временно доступен по другому URL.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>304</strong></td>
        <td>Не изменялось (Not Modified) — ресурс не был изменен с момента последнего запроса.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>400</strong></td>
        <td>Неверный запрос (Bad Request) — сервер не понимает запрос из-за синтаксической ошибки.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>401</strong></td>
        <td>Не авторизован (Unauthorized) — требуется аутентификация пользователя.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>403</strong></td>
        <td>Запрещено (Forbidden) — доступ к ресурсу запрещен.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>404</strong></td>
        <td>Не найдено (Not Found) — запрашиваемый ресурс не найден.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>405</strong></td>
        <td>Метод не разрешен (Method Not Allowed) — метод запроса не поддерживается для данного ресурса.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>409</strong></td>
        <td>Конфликт (Conflict) — запрос не может быть выполнен из-за конфликта.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>422</strong></td>
        <td>Необрабатываемый элемент (Unprocessable Entity) — запрос хорошо сформирован, но не может быть обработан из-за семантических ошибок.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>500</strong></td>
        <td>Внутренняя ошибка сервера (Internal Server Error) — сервер столкнулся с ошибкой при обработке запроса.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>502</strong></td>
        <td>Плохой шлюз (Bad Gateway) — сервер, выступающий в роли шлюза, получил недействительный ответ.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>503</strong></td>
        <td>Сервис недоступен (Service Unavailable) — сервер временно недоступен.</td>
    </tr>
    <tr>
        <td style="font-size: 1.5em;"><strong>504</strong></td>
        <td>Время ожидания шлюза истекло (Gateway Timeout) — шлюз не получил своевременный ответ от другого сервера.</td>
    </tr>
</table>

Статус-коды HTTP — это числовые коды, которые сервер отправляет в ответ на запрос клиента. Они помогают понять, был ли запрос успешным, завершился ли ошибкой или требует дополнительных действий. Эти коды делятся на пять классов, каждый из которых обозначает определённый тип ответа:

1. **1xx** — Информационные.
2. **2xx** — Успешные.
3. **3xx** — Перенаправления.
4. **4xx** — Ошибки клиента.
5. **5xx** — Ошибки сервера.

Понимание статус-кодов критически важно для разработчиков, тестировщиков и аналитиков, так как они помогают:
- Выявлять проблемы в работе API.
- Отлаживать приложения.
- Оптимизировать взаимодействие между клиентом и сервером.

---


## **1. Классификация Статус-Кодов**

### **1.1. 1xx — Информационные**
Эти коды сообщают о том, что запрос был получен и обрабатывается. Они редко используются в повседневной практике.

- **100 Continue**: Сервер подтверждает, что клиент может продолжить отправку запроса.
- **101 Switching Protocols**: Сервер согласен на смену протокола (например, с HTTP на WebSocket).

---

### **1.2. 2xx — Успешные**
Эти коды указывают на успешное выполнение запроса.

- **200 OK**: Запрос выполнен успешно.
- **201 Created**: Ресурс был успешно создан (например, после POST-запроса).
- **204 No Content**: Запрос выполнен, но ответ не содержит тела (например, после DELETE-запроса).

---

### **1.3. 3xx — Перенаправления**
Эти коды указывают, что клиент должен выполнить дополнительные действия для завершения запроса.

- **301 Moved Permanently**: Ресурс был перемещён на новый URL навсегда.
- **302 Found**: Ресурс временно доступен по другому URL.
- **304 Not Modified**: Ресурс не изменился с момента последнего запроса (используется для кеширования).

---

### **1.4. 4xx — Ошибки клиента**
Эти коды указывают на ошибки со стороны клиента (например, неверный запрос или отсутствие прав).

- **400 Bad Request**: Сервер не может обработать запрос из-за синтаксической ошибки.
- **401 Unauthorized**: Требуется аутентификация.
- **403 Forbidden**: Доступ запрещён, даже если пользователь аутентифицирован.
- **404 Not Found**: Запрашиваемый ресурс не найден.
- **409 Conflict**: Конфликт запроса с текущим состоянием сервера (например, дублирование данных).

---

### **1.5. 5xx — Ошибки сервера**
Эти коды указывают на ошибки на стороне сервера.

- **500 Internal Server Error**: Общий код ошибки сервера.
- **502 Bad Gateway**: Сервер получил недействительный ответ от вышестоящего сервера.
- **503 Service Unavailable**: Сервер временно недоступен (например, из-за перегрузки).
- **504 Gateway Timeout**: Сервер не получил ответ от вышестоящего сервера вовремя.

---

## **2. Как использовать статус-коды в разработке**

### **2.1. Анализ API**
При работе с API важно понимать, какие статус-коды возвращаются в разных ситуациях:
- **200 OK**: Данные успешно получены.
- **400 Bad Request**: Проверьте формат запроса.
- **401 Unauthorized**: Проверьте токен авторизации.
- **500 Internal Server Error**: Свяжитесь с администратором сервера.

### **2.2. Тестирование**
Используйте инструменты, такие как Postman или Charles, чтобы проверить, возвращаются ли корректные статус-коды:
- Создайте запросы GET, POST, PUT, DELETE.
- Проверьте ответы на соответствие документации API.

---

## **3. Распространённые ошибки и их решение**

### **3.1. 400 Bad Request**
**Причина:** Неверный формат данных в запросе.  
**Решение:** Проверьте JSON, заголовки и параметры запроса.

### **3.2. 401 Unauthorized**
**Причина:** Отсутствует или неверный токен авторизации.  
**Решение:** Убедитесь, что токен передаётся в заголовке `Authorization`.

### **3.3. 404 Not Found**
**Причина:** Запрашиваемый ресурс не существует.  
**Решение:** Проверьте URL и убедитесь, что ресурс создан.

### **3.4. 500 Internal Server Error**
**Причина:** Ошибка на стороне сервера.  
**Решение:** Проверьте логи сервера или свяжитесь с администратором.

---

## **4. Советы по использованию статус-кодов**

### **4.1. Используйте правильные коды**
- Всегда возвращайте соответствующие статус-коды в вашем API.
- Например, используйте **201 Created** для создания ресурса, а не **200 OK**.

### **4.2. Добавляйте детали в ответ**
Дополнительно к статус-коду возвращайте описание ошибки в теле ответа:
```json
{
    "error": "Bad Request",
    "message": "Invalid email format"
}
```

### **4.3. Логируйте ошибки**
Настройте логирование для отслеживания ошибок, таких как **500 Internal Server Error**, чтобы быстрее находить и исправлять проблемы.

---

## **5. Инструменты для работы со статус-кодами**

### **5.1. Postman**
Postman позволяет отправлять запросы и анализировать статус-коды.  
**Пример использования:**
1. Создайте запрос GET к API.
2. Проверьте статус-код в ответе.
3. Изучите тело ответа для дополнительной информации.

### **5.2. Charles**
Charles помогает отслеживать HTTP/HTTPS-трафик и анализировать статус-коды.  
**Пример использования:**
1. Включите запись трафика.
2. Найдите запрос и проверьте его статус-код.
3. Проанализируйте заголовки и тело ответа.

---

## **6. Практический пример**

### **Задача:** Отправить POST-запрос для создания нового пользователя через API.

#### **Шаг 1: Формируем запрос**
```http
POST /api/users HTTP/1.1
Host: example.com
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN

{
    "name": "John Doe",
    "email": "john.doe@example.com"
}
```

#### **Шаг 2: Анализируем ответ**
- **Успешный ответ (201 Created):**
```json
{
    "id": 123,
    "name": "John Doe",
    "email": "john.doe@example.com"
}
```
- **Ошибка (400 Bad Request):**
```json
{
    "error": "Bad Request",
    "message": "Email is already taken"
}
```
